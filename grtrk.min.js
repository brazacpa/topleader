function getAllUrlParams(){const t={},e=location.search.substring(1);return e?(e.split("&").forEach((e=>{const[r,c]=e.split("=").map(decodeURIComponent);r&&(t[r]=c||null)})),t):t}function getRtkClickId(){const t=sessionStorage.getItem("rtkclickid");if(t)return t;const e=localStorage.getItem("rtkclickid");if(e)return e;const r=document.cookie.match(/(^|;\s*)(rtkclickid)=([^;]+)/i);return r?decodeURIComponent(r[3]):null}function updateAllLinksWithParams(t){document.querySelectorAll("a").forEach((e=>{try{if(!e.href||e.href.startsWith("#")||e.href.startsWith("javascript:"))return;const r=new URL(e.href);Object.entries(t).forEach((([t,e])=>{e&&r.searchParams.set(t,e)})),e.href=r.toString()}catch(t){}}))}function getParam(t){return new URLSearchParams(window.location.search).get(t)}function getRootDomain(t){return t.split(".").slice(-2).join(".")}function parseUrlLand(){const t="localhost"===window.location.hostname,e=window.location.pathname.split("/").filter((t=>t.length>0));if(e.length<3)return null;const r=t?e[4]:e[0],c=t?e[5]:e[1],n=t?e[6]:e[2],[i,o]=(n||"").split("-");return r&&c&&i&&o?{product_slug:r,adv_type:c,adv_id:i,adv_code:o}:null}document.addEventListener("DOMContentLoaded",(()=>{const t=new URL(window.location),e=new URLSearchParams(t.search),r=getAllUrlParams();updateAllLinksWithParams(r);const c=window.location.hostname,n=`track.${getRootDomain(c)}`;document.querySelectorAll('a[href*="krcp5.ttrk.io"]').forEach((t=>{const e=t.getAttribute("href");if(e){const r=e.replace(/krcp5\.ttrk\.io/gi,n);t.setAttribute("href",r)}}));const i=parseUrlLand();if(!i)return;const o=getParam("cmpid")||getParam("rtkcmpid")||localStorage.getItem("cmpid"+i.adv_id);if(!o||!/^[a-z0-9]{24,36}$/i.test(o))return;let a;localStorage.setItem("cmpid"+i.adv_id,o);const l=getParam("rt_sf")||null;!l||"prelp"!=l&&"lp"!=l?a="pre-vsl"==i.adv_type?"uniprelpclick.js":"unilpclick.js":"prelp"==l?(a="uniprelpclick.js",document.querySelectorAll('a[href*="/click"]').forEach((t=>{const e=t.getAttribute("href");if(e){const r=e.replace(/\/click(?=$|[?#])/i,"/preclick");t.setAttribute("href",r)}}))):(a="unilpclick.js",document.querySelectorAll('a[href*="/preclick"]').forEach((t=>{const e=t.getAttribute("href");if(e){const r=e.replace(/\/preclick(?=$|[?#])/i,"/click");t.setAttribute("href",r)}})));const s=document.createElement("script");if(s.src=`https://${n}/${a}?attribution=lastpaid&cookiedomain=${c}&cookieduration=30&defaultcampaignid=${o}&regviewonce=false`,s.async=!0,window.addEventListener("DOMContentLoaded",(function(){document.body.appendChild(s)})),!e.has("rtkclickid")&&!localStorage.getItem("clickid"+i.adv_id)){let t=0;const e=30,c=setInterval((()=>{const n=getRtkClickId();n&&(updateAllLinksWithParams({...r,rtkclickid:n}),clearInterval(c)),++t>=e&&clearInterval(c)}),100)}}));